import o from"lcu-connector";import e from"node-fetch";import a from"readline";let connector=new o,rl;function displayInteraction(o){console.log("\nPreencha abaixo com os dados que voc\xea deseja alterar em sua conta: "),rl.question("\x1b[33mNick:\x1b[0m ",e=>{rl.question("\x1b[33mTag:\x1b[0m ",a=>{e=e.slice(0,12),a=a.slice(0,5),console.log("\nSeu nick em todos os jogos da Riot ser\xe1 alterado para: \x1b[32m",e+"#"+a,"\x1b[0m\nDeseja confirmar? (S/N)"),ConfirmRequest(o,e,a)})})}function ConfirmRequest(o,e,a){rl.question("",async n=>{"s"==(n=n.trim().toLowerCase())?(rl.close(),await changeNameAndTag(o,e,a)):"n"==n?(console.log("\x1b[31mAltera\xe7\xe3o cancelada. O console fechar\xe1 em breve.\x1b[0m"),rl.close(),setTimeout(()=>{process.exit(0)},5e3)):(console.log("\x1b[31m\nResposta inv\xe1lida. Por favor, digite 'S' para sim ou 'N' para n\xe3o.\x1b[0m"),ConfirmRequest(o,e,a))})}async function changeNameAndTag(o,a,n){let t={gameName:a,tagLine:n},{protocol:r,address:s,port:c,username:i,password:m}=o;try{console.log("\x1b[33m\nTentando alterar o nick e tag com os seguintes dados:\x1b[0m",t),console.log("\x1b[33mConectando ao endpoint:\x1b[0m",`${r}://${s}:${c}`);let l=await import("https"),_=await e(`${r}://${s}:${c}/lol-summoner/v1/save-alias`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+Buffer.from(`${i}:${m}`).toString("base64")},body:JSON.stringify(t),agent:new l.Agent({rejectUnauthorized:!1})});console.log("\x1b[33mStatus da resposta:\x1b[0m",_.status);let d=await _.json();console.log("\x1b[33mResposta da API:\x1b[0m",d),_.ok?d.isSuccess?console.log("\x1b[32m\nAltera\xe7\xe3o confirmada!\x1b[0m"):console.log("\x1b[31m\nAltera\xe7\xe3o n\xe3o foi conclu\xedda:\x1b[0m",d.errorCode,d.errorMessage):console.error("\x1b[31m\nErro na resposta da API:\x1b[0m",d)}catch(b){console.error("\x1b[31m\nOcorreu ao fazer a requisi\xe7\xe3o da troca de nick:\x1b[0m",b)}}connector.on("connect",o=>{console.log("\x1b[32mConectado\x1b[0m ao Client do League of Legends."),rl=a.createInterface({input:process.stdin,output:process.stdout}),displayInteraction(o)}),connector.on("disconnect",()=>{console.log("\x1b[31m\nDesconectado\x1b[0m do Client do League of Legends."),rl.close()}),connector.start(),console.log(`\x1b[31mDesenvolvido com ❤️ por Koytz. \x1b[0m`),console.log(`Siga-me no X: \x1b[32m@koytz_\x1b[0m :)
`);
